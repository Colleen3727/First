<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulated Desktop</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
            transition: background-color 0.5s; 
        }

        .desktop {
            position: relative;
            width: 100%;
            height: 100%;
            background: url('ae49bb07a6bbd4692464073fb64904ec.jpg@h_1280.jpeg') no-repeat center center;
            background-size: cover;
        }

        .popup {
            position: absolute;
            width: 200px;
            height: 100px;
            background: #f0f0f0;
            border: 1px solid #cccccc;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
            z-index: 10;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            font-family: 'Arial', sans-serif;
            font-size: 14px;
            opacity: 0;
            transition: opacity 0.3s, transform 0.3s;
            transform: scale(0);
        }

        .popup .title {
            width: 100%;
            background: #e0e0e0;
            padding: 5px;
            border-bottom: 1px solid #cccccc;
            text-align: left;
            font-weight: bold;
            position: relative;
        }

        .popup .title .close {
            position: absolute;
            top: 5px;
            right: 10px;
            cursor: pointer;
            color: red;
        }

        .popup .title .close:hover {
            text-decoration: underline;
        }

        .popup .content {
            padding: 10px;
            text-align: center;
        }

        .popup.mosaic {
            background: repeating-linear-gradient(
                45deg,
                rgba(255, 255, 255, 0.8),
                rgba(255, 255, 255, 0.8) 1px,
                rgba(0, 0, 0, 0.8) 1px,
                rgba(0, 0, 0, 0.8) 2px
            );
        }

        .eye {
            position: absolute;
            width: 50px;
            height: 50px;
            background: url('icons8-眼睛-94.png') no-repeat center center;
            background-size: cover;
            z-index: 10;
            animation: rotateEye 5s infinite linear;
        }
        
        .trashcan {
            position: absolute;
            bottom: 700px;
            left: 100px;
            width: 100px;
            height: 100px;
            background: url('回收站\(Recycle\ Bin\)_爱给网_aigei_com.png') no-repeat center center;
            background-size: cover;
            cursor: pointer;
            z-index: 10;
        }

        @keyframes rotateEye {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .distorted {
            filter: url(#distortion);
        }
    </style>
</head>
<body>
    <div class="desktop" id="desktop">
        <div class="eye" id="eye"></div>
        <div class="trashcan"></div>
    </div>

    <svg width="0" height="0">
        <filter id="distortion">
            <feTurbulence type="fractalNoise" baseFrequency="0.02" numOctaves="5" result="turbulence" />
            <feDisplacementMap in="SourceGraphic" in2="turbulence" scale="50" xChannelSelector="R" yChannelSelector="G" />
        </filter>
    </svg>

    <script>
        let popups = [];
        let popupInterval;
        let popupSpeed = 2000;
        const popupContent = [
            "Hi, have you seen my donuts?",
            "Warning: System Update Required",
            "New Email from Kevin Mitnick",
            "Your subscription is about to expire",
            "Important: Security Alert",
            "You have a new message",
            "System Error: Please restart your computer",
            "Error! Error! Error!",
            "Your password will expire in 7 days",
            "Urgent: Password Reset Required",
            "Try to shut me up, huh?",
            "Just wait and see.",
            "You wish!",
            "(꒪▿꒪)",
            " (╯°口°)╯︵ ┻━┻",
        ];

        function createPopup() {
            const popup = document.createElement('div');
            popup.className = 'popup';
            popup.innerHTML = `
                <div class="title">Popup <span class="close" onclick="closePopup(event)">X</span></div>
                <div class="content">${popupContent[Math.floor(Math.random() * popupContent.length)]}</div>
            `;
            popup.style.left = (Math.random() * (window.innerWidth - 200)) + 'px';
            popup.style.top = (Math.random() * (window.innerHeight - 100)) + 'px';

            document.getElementById('desktop').appendChild(popup);
            popups.push(popup);

            setTimeout(() => {
                popup.style.opacity = 1;
                popup.style.transform = 'scale(1)';
            }, 100);

            if (Math.random() < 0.2) {
                popup.classList.add('mosaic');
            }
        }

        function closePopup(event) {
            event.stopPropagation(); 
            const popup = event.target.closest('.popup');
            if (popup) {
                popup.remove();
                popups = popups.filter(p => p !== popup);
                adjustPopupSpeed();
            }
        }

        function clearPopups() {
        }

        function startPopups() {
            popupInterval = setInterval(() => {
                createPopup();
            }, popupSpeed);
        }

        function stopPopups() {
            clearInterval(popupInterval);
        }

        function adjustPopupSpeed() {
            if (popups.length < 5) {
                popupSpeed = 2000;
            } else if (popups.length < 10) {
                popupSpeed = 1500;
            } else if (popups.length < 15) {
                popupSpeed = 1000;
            } else {
                popupSpeed = 500;
            }
            if (popupInterval) {
                clearInterval(popupInterval);
                startPopups();
            }
        }

        function randomDistortion() {
            const desktop = document.getElementById('desktop');
            if (Math.random() < 0.1) { 
                desktop.classList.add('distorted');
                setTimeout(() => {
                    desktop.classList.remove('distorted');
                }, 1000); 
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            startPopups();

            
            setInterval(randomDistortion, 3000); 

            document.getElementById('desktop').addEventListener('click', (e) => {
                if (e.target.classList.contains('popup') || e.target.classList.contains('title')) {
                    return;
                }
            });
        });
    </script>

</body>
</html>